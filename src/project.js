require=function e(t,n,o){function c(r,i){if(!n[r]){if(!t[r]){var s="function"==typeof require&&require;if(!i&&s)return s(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return c(n||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)c(o[r]);return c}({config:[function(e,t,n){"use strict";cc._RF.push(t,"08a251hQk1FuondtCKhfum5","config");t.exports={urls:{login:"https://gamecenter.phonecoolgame.com/login",user:"https://gamecenter.phonecoolgame.com/user",hongbao:"https://gamecenter.phonecoolgame.com/hongbao",pay:"https://gamecenter.phonecoolgame.com/pay/unifiedOrder"},config:{appid:"wx6f71b573a7454d2f",appsecret:"d885975acfe0f15a2856c7caee6555d4"},getParam:function(){return{appid:"wx6f71b573a7454d2f",logintype:"freein",noncestr:e("../utils/util").randomString()}},userInfo:"",loginScene:"start",rankTag:2005,useName:"",UID:""},cc._RF.pop()},{"../utils/util":"util"}],gameWxLoad:[function(e,t,n){"use strict";cc._RF.push(t,"a6ecaL4l1FIZriHo/aG1gnL","gameWxLoad");var o=e("./login"),c=e("../config/config"),a=e("../share/share"),r=e("../rank/rank"),i=null;cc.Class({extends:cc.Component,properties:{},onLoad:function(){(i=this).register(),cc.sys.platform==cc.sys.WECHAT_GAME?(i._rank=new r,i._rank.loadQunRankWidget(i)):cc.director.loadScene(c.loginScene,null)},start:function(){},register:function(){var e=cc.find("Canvas/loginSuccess/wxLogin");console.log(e),e.on("click",function(e){i.wxLoading()},i),cc.find("Canvas/loginFail/reLogin").on("click",function(e){i.wxLoading()},i)},nameLoading:function(){var e=cc.find("Canvas/loginSuccess/nameTitle/nameString").getComponent(cc.EditBox);c.useName=e.string},wxLoading:function(){this.nameLoading(),wx.login({success:function(e){o.login(e.code,function(e){console.log(e);var t=wx.getLaunchOptionsSync();console.log("wx.getLaunchOptionsSync::",t),t&&t.query&&t.query.uid&&(a.addFriend(t.query.uid),t.query.qunId)?i._rank.getQunRank(t.query.qunId,function(e){e&&e.data&&(i.qunRankWidget.active=!0,i.qunRankWidget.getComponent("rankQunLayer").init(e.data,function(){cc.director.loadScene(c.loginScene,null)}))}):cc.director.loadScene(c.loginScene,null)},function(){i.failLogin()})},fail:function(e){i.failLogin()}})},failLogin:function(){var e=cc.find("Canvas/loginSuccess");e.active=!1,(e=cc.find("Canvas/loginFail")).active=!0}}),cc._RF.pop()},{"../config/config":"config","../rank/rank":"rank","../share/share":"share","./login":"login"}],game:[function(e,t,n){"use strict";cc._RF.push(t,"21a22yZOpNEj6JUXqgBMu2C","game");var o=e("./wx/userOperate/userOperate"),c=e("pot"),a=null;Array.prototype.contains=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.x==e.x&&n.y==e.y)return!0}return!1},cc.Class({extends:cc.Component,properties:{pot1:cc.Prefab,obstacleSp:cc.SpriteFrame},onLoad:function(){(a=this).endPanel=cc.find("endPanel",a.node),a.endPanel.active=!1,a.replayBtn=cc.find("btn/replay",a.endPanel),a.shareBtn=cc.find("btn/share",a.endPanel),a.replayBtn.on("click",a.onReplayClick,a),a.envPanel=cc.find("env",a.node),a.envPanel.active=!1,a.lbStep=cc.find("env/lbStep",a.node).getComponent(cc.Label),a.restartBtn=cc.find("env/btn_restart",a.node),a.restartBtn.on("click",a.onReplayClick,a),a.infoPanel=cc.find("infoPanel",a.endPanel),a.winWidget=cc.find("win",a.infoPanel),a.winStepLb=cc.find("label_step_num",a.winWidget).getComponent(cc.Label),a.loseWidget=cc.find("lose",a.infoPanel),a.loseStepLb=cc.find("label_desc_new",a.loseWidget).getComponent(cc.Label),a.scoreLb=cc.find("mark/label_score",a.infoPanel).getComponent(cc.RichText),a.recordImg=cc.find("mark/newRecord",a.infoPanel),a.lbBestStep=cc.find("lbBestStep",a.infoPanel).getComponent(cc.Label),a.tutorialPanel=cc.find("tutorial",a.node),a.tutorialPanel.on("click",a.newGame,a),a.tutorialPanel.active=!1,a.gameState=cc.Enum({Play:0,Win:1,Lose:2}),a.curGameState=a.gameState.Play,a.step=0,a.startPosCat=cc.p(-15,570),a.sjCat=cc.find("dog",a.node),a.catState=cc.Enum({Stay:0,Weizhu:1}),a.curCatState=a.catState.Stay,a.catPos=cc.p(4,4),a.dirs=cc.Enum({LeftUp:0,RightUp:1,Left:2,Right:3,LeftDown:4,RightDown:5}),a.dirPos1=new Array,a.dirPos1.push(cc.p(-1,-1)),a.dirPos1.push(cc.p(-1,0)),a.dirPos1.push(cc.p(0,-1)),a.dirPos1.push(cc.p(0,1)),a.dirPos1.push(cc.p(1,-1)),a.dirPos1.push(cc.p(1,0)),a.dirPos2=new Array,a.dirPos2.push(cc.p(-1,0)),a.dirPos2.push(cc.p(-1,1)),a.dirPos2.push(cc.p(0,-1)),a.dirPos2.push(cc.p(0,1)),a.dirPos2.push(cc.p(1,0)),a.dirPos2.push(cc.p(1,1));var e=cc.p(-278,150),t=cc.find("map",a.node);a.map=new Array;for(var n=a.map,r=0;r<9;r++){n[r]=new Array;for(var i=0;i<9;i++){var s=cc.instantiate(a.pot1);s.parent=t,s.setPosition(e.add(cc.p(65*i,-60*r))),r%2!=0&&s.setPosition(s.getPosition().add(cc.p(35,0))),s.on("click",a.onPotClick,a);var l=new c;l.setPot(s),s.wrap=l,n[r][i]=l}}a.obstacleList=new Array,a._userOperate=new o},clear:function(){a.step=0,a.catPos=cc.p(4,4),a.obstacleList.length=0,a.endPanel.active=!1;for(var e=0;e<9;e++)for(var t=0;t<9;t++)a.map[e][t].restoreObstacle()},createObstacle:function(){var e=a.randomNum(4,12);cc.log("obstacle num: "+e);for(var t=a.getRandomArray(),n=0;n<e;n++){var o=t[n],c=Math.floor(o/9),r=o%9;cc.log("num = "+o),cc.log("x, y = "+cc.p(c,r)),a.obstacleList.push(cc.p(c,r)),a.map[c][r].setObstacle(a.obstacleSp)}},newGame:function(){a.showTutorial(!1),a.lbStep.string="步数: "+a.step,a.curGameState=a.gameState.Play,a.curCatState=a.catState.Stay,a.createObstacle(),a.sjCat.setPosition(a.startPosCat),a.moveCatTo(a.catPos),a.showAnimation()},showTutorial:function(e){a.tutorialPanel.active=e,a.envPanel.active=!e},start:function(){a.showTutorial(!0)},moveCatTo:function(e){var t=a.map[e.x][e.y].getPosition();t=t.add(cc.p(0,-5)),a.sjCat.stopAllActions();var n=cc.moveTo(.25,t);a.sjCat.runAction(n)},onShareClick:function(){cc.log("share btn clicked!!!"),alert("分享成功")},onReplayClick:function(){a.clear(),a.newGame()},onPotClick:function(e){if(a.curGameState==a.gameState.Play){var t=e.detail.node.wrap;t.hasObstacle||(t.setObstacle(a.obstacleSp),a.step++,a.lbStep.string="步数: "+a.step,a.runAway())}},showAnimation:function(){a.curCatState==a.catState.Stay?a.sjCat.getComponent(cc.Animation).play("dogStay"):a.sjCat.getComponent(cc.Animation).play("dogSurround")},isPotAtEdge:function(e){return 0==e.x||0==e.y||8==e.x||8==e.y},posHasObstacle:function(e){return a.map[e.x][e.y].hasObstacle},checkSurround:function(e){for(var t=new Array,n=new Array(e);n.length>0;){var o=n.shift();if(t.push(o),!a.posHasObstacle(o)&&a.isPotAtEdge(o))return;for(var c=0;c<6;c++){var r=a.getNextPos(o,c);t.contains(r)||n.contains(r)||(a.posHasObstacle(r)?t.push(r):n.push(r))}}a.curCatState=a.catState.Weizhu,a.showAnimation()},getNextPos:function(e,t){return e=e.x%2==0?e.add(a.dirPos1[t]):e.add(a.dirPos2[t])},runAway:function(){for(var e=-2,t=-1,n=0;n<6;n++){for(var o=a.catPos,c=-1,r=0,i=!1,s=!1;!i;){if((o=a.getNextPos(o,n)).x<0||o.y<0||o.x>8||o.y>8){i=!0;break}if(a.map[o.x][o.y].hasObstacle){i=!0,s=!0;break}r++}if(s)c=0==r?-2:-1/r;else{if(0==r)return void a.gameLose();c=1/r}c>e&&(e=c,t=n)}-1!=t?(a.catPos=a.getNextPos(a.catPos,t),a.moveCatTo(a.catPos),a.curCatState==a.catState.Stay&&a.checkSurround(a.catPos)):a.gameWin()},gameWin:function(){cc.log("you win"),a.curGameState=a.gameState.Win,a.sjCat.getComponent(cc.Animation).stop(),a.envPanel.active=!1,a.endPanel.active=!0,a.winWidget.active=!0,a.loseWidget.active=!1,a.winStepLb.string="你用 "+a.step+" 步抓住震惊狗!";var e=100-a.step;a.scoreLb.string="<color=#990000>"+e+"</c>",a.showBestScore(e)},gameLose:function(){cc.log("you lose"),a.curGameState=a.gameState.Lose,a.sjCat.getComponent(cc.Animation).stop(),a.envPanel.active=!1,a.endPanel.active=!0,a.winWidget.active=!1,a.loseWidget.active=!0,a.loseStepLb.string="你花了"+a.step+"步,没有抓住震惊狗!";var e=-100+a.step;a.scoreLb.string="<color=#990000>"+e+"</c>",a.showBestScore(e)},showBestScore:function(e){var t=cc.sys.localStorage.getItem("maxScore");t||(t=-100,cc.sys.localStorage.setItem("maxScore",-100)),e&&e>t?(t=e,cc.sys.localStorage.setItem("maxScore",t),a.recordImg.active=!0,cc.sys.platform==cc.sys.WECHAT_GAME&&a._userOperate.setScore(t)):a.recordImg.active=!1,a.lbBestStep.string="最佳成绩  "+t},randomNum:function(e,t){var n=t-e,o=Math.random();return e+Math.round(o*n)},getRandomArray:function(){for(var e=new Array,t=0;t<81;t++)e[t]=t;return e.splice(40,1),e.sort(function(){return.5-Math.random()}),e}}),cc._RF.pop()},{"./wx/userOperate/userOperate":"userOperate",pot:"pot"}],hongbaoLayer:[function(e,t,n){"use strict";cc._RF.push(t,"3968fXs/iZBWKyG3pzo5bfX","hongbaoLayer");var o=e("./hongbao"),c=null;cc.Class({extends:cc.Component,properties:{priceEidt:{default:null,type:cc.EditBox},priceNumEdit:{default:null,type:cc.EditBox}},onLoad:function(){(c=this).init()},init:function(){c.priceEidt.string=0,c.priceNumEdit.string=0},btnClick:function(){var e=Math.floor(100*parseFloat(c.priceEidt.string)),t=parseInt(c.priceNumEdit.string);console.log(e,t),isNaN(e)||isNaN(t)||e<1||t<1||e/t<1||(o.createHongbao(e,t),c.node.active=!1)},start:function(){}}),cc._RF.pop()},{"./hongbao":"hongbao"}],hongbao:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"9b3ffnMD9pARIRbMOiELa/0","hongbao"),Object.defineProperty(n,"__esModule",{value:!0});var c=e("../config/config").urls,a=(e("../config/config"),e("../utils/util"));n.default=function e(){o(this,e),this.loadHongbaoWidget=function(e,t){cc.loader.loadRes("wx/hongbao/hongbaoWidget",cc.Prefab,function(n,o){console.log(o);var c=cc.instantiate(o);e.node.addChild(c),c.setPosition(cc.p(0,0)),c.active=!1,e[t=t||"hongbaoWidget"]=c})},this.createHongbao=function(e,t){var n=c.hongbao+"/create_hongbao",o={money:e,peoplecount:t,type:1,blob:{}};a.request({url:n,data:o,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){console.log("create_hongbao Success");var n=t.data;console.log(n),a.pay(e/100,null,null,null)},fail:function(e){console.error(e)}})},this.lingHongbao=function(e,t){var n=c.hongbao+"/ling_hongbao",o={hongbaoId:e,command:t};a.request({url:n,data:o,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("ling_hongbao Success");var t=e.data;console.log(t)},fail:function(e){console.error(e)}})},this.getHongbaoInfo=function(e,t){var n=c.hongbao+"/get_hongbaoInfo",o={hongbaoId:e,command:t};a.request({url:n,data:o,success:function(e){console.log("get_hongbaoInfo Success",e)},fail:function(e){console.error(e)}})},this.getHongBaoGetInfos=function(e,t){var n=c.hongbao+"/get_HongBaoGetInfos",o={};a.request({url:n,data:o,success:function(e){console.log("get_HongBaoGetInfos Success",e)},fail:function(e){console.error(e)}})},this.getHongBaoSendInfos=function(e,t){var n=c.hongbao+"/get_HongBaoSendInfos",o={};a.request({url:n,data:o,success:function(e){console.log("get_HongBaoSendInfos Success",e)},fail:function(e){console.error(e)}})}},t.exports=n.default,cc._RF.pop()},{"../config/config":"config","../utils/util":"util"}],item:[function(e,t,n){"use strict";cc._RF.push(t,"52187d23XdOBoVbF+KDy0Ny","item");var o=null;cc.Class({extends:cc.Component,properties:{image:{default:null,type:cc.Node},nameUser:{default:null,type:cc.Node},score:{default:null,type:cc.Node}},onLoad:function(){o=this},start:function(){},init:function(e,t){var n=(o=this).nameUser.getComponent(cc.Label),c=o.score.getComponent(cc.Label),a=o.image.getComponent(cc.Sprite),r=cc.find("rank",o.node);(r=r.getComponent(cc.Label)).string=t+4,n.string=e.name||"",c.string=e.score||0;var i=e.portrait;i&&(i=i.split("/0",1),i+="/64",cc.loader.load({url:i,type:"png"},function(e,t){var n=new cc.SpriteFrame;n.setTexture(t),a.spriteFrame=n}))}}),cc._RF.pop()},{}],login:[function(e,t,n){"use strict";cc._RF.push(t,"2eea51uPQ9NAYSwHZgWNPzS","login");var o=e("../config/config").urls,c=e("../config/config"),a=e("../utils/util"),r=e("../userOperate/userOperate");r=new r;cc.sys.platform==cc.sys.WECHAT_GAME&&wx.getUserInfo({success:function(e){console.log(e),c.userInfo=e.userInfo,r.setUserInfo()}});t.exports={login:function(e,t,n){var r=c.getParam();r.appsign=a.sign(r),r.uid=c.useName,r.js_code=e,a.request({url:o.login,data:r,success:function(e){console.log(e);var o=e.data;!o||0!=o.ecode&&2!=o.ecode?(JSON.stringify(e),n&&"function"==typeof n&&n()):(e.data.uid&&(c.UID=e.data.uid),t&&"function"==typeof t&&t())},fail:function(e){console.error(e)}})}},cc._RF.pop()},{"../config/config":"config","../userOperate/userOperate":"userOperate","../utils/util":"util"}],md5:[function(e,t,n){"use strict";function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t){return e<<t|e>>>32-t}function a(e,t,n,a,r,i){return o(c(o(o(t,e),o(a,i)),r),n)}function r(e,t,n,o,c,r,i){return a(t&n|~t&o,e,t,c,r,i)}function i(e,t,n,o,c,r,i){return a(t&o|n&~o,e,t,c,r,i)}function s(e,t,n,o,c,r,i){return a(t^n^o,e,t,c,r,i)}function l(e,t,n,o,c,r,i){return a(n^(t|~o),e,t,c,r,i)}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,c,a,u,f,d=1732584193,p=-271733879,g=-1732584194,h=271733878;for(n=0;n<e.length;n+=16)c=d,a=p,u=g,f=h,p=l(p=l(p=l(p=l(p=s(p=s(p=s(p=s(p=i(p=i(p=i(p=i(p=r(p=r(p=r(p=r(p,g=r(g,h=r(h,d=r(d,p,g,h,e[n],7,-680876936),p,g,e[n+1],12,-389564586),d,p,e[n+2],17,606105819),h,d,e[n+3],22,-1044525330),g=r(g,h=r(h,d=r(d,p,g,h,e[n+4],7,-176418897),p,g,e[n+5],12,1200080426),d,p,e[n+6],17,-1473231341),h,d,e[n+7],22,-45705983),g=r(g,h=r(h,d=r(d,p,g,h,e[n+8],7,1770035416),p,g,e[n+9],12,-1958414417),d,p,e[n+10],17,-42063),h,d,e[n+11],22,-1990404162),g=r(g,h=r(h,d=r(d,p,g,h,e[n+12],7,1804603682),p,g,e[n+13],12,-40341101),d,p,e[n+14],17,-1502002290),h,d,e[n+15],22,1236535329),g=i(g,h=i(h,d=i(d,p,g,h,e[n+1],5,-165796510),p,g,e[n+6],9,-1069501632),d,p,e[n+11],14,643717713),h,d,e[n],20,-373897302),g=i(g,h=i(h,d=i(d,p,g,h,e[n+5],5,-701558691),p,g,e[n+10],9,38016083),d,p,e[n+15],14,-660478335),h,d,e[n+4],20,-405537848),g=i(g,h=i(h,d=i(d,p,g,h,e[n+9],5,568446438),p,g,e[n+14],9,-1019803690),d,p,e[n+3],14,-187363961),h,d,e[n+8],20,1163531501),g=i(g,h=i(h,d=i(d,p,g,h,e[n+13],5,-1444681467),p,g,e[n+2],9,-51403784),d,p,e[n+7],14,1735328473),h,d,e[n+12],20,-1926607734),g=s(g,h=s(h,d=s(d,p,g,h,e[n+5],4,-378558),p,g,e[n+8],11,-2022574463),d,p,e[n+11],16,1839030562),h,d,e[n+14],23,-35309556),g=s(g,h=s(h,d=s(d,p,g,h,e[n+1],4,-1530992060),p,g,e[n+4],11,1272893353),d,p,e[n+7],16,-155497632),h,d,e[n+10],23,-1094730640),g=s(g,h=s(h,d=s(d,p,g,h,e[n+13],4,681279174),p,g,e[n],11,-358537222),d,p,e[n+3],16,-722521979),h,d,e[n+6],23,76029189),g=s(g,h=s(h,d=s(d,p,g,h,e[n+9],4,-640364487),p,g,e[n+12],11,-421815835),d,p,e[n+15],16,530742520),h,d,e[n+2],23,-995338651),g=l(g,h=l(h,d=l(d,p,g,h,e[n],6,-198630844),p,g,e[n+7],10,1126891415),d,p,e[n+14],15,-1416354905),h,d,e[n+5],21,-57434055),g=l(g,h=l(h,d=l(d,p,g,h,e[n+12],6,1700485571),p,g,e[n+3],10,-1894986606),d,p,e[n+10],15,-1051523),h,d,e[n+1],21,-2054922799),g=l(g,h=l(h,d=l(d,p,g,h,e[n+8],6,1873313359),p,g,e[n+15],10,-30611744),d,p,e[n+6],15,-1560198380),h,d,e[n+13],21,1309151649),g=l(g,h=l(h,d=l(d,p,g,h,e[n+4],6,-145523070),p,g,e[n+11],10,-1120210379),d,p,e[n+2],15,718787259),h,d,e[n+9],21,-343485551),d=o(d,c),p=o(p,a),g=o(g,u),h=o(h,f);return[d,p,g,h]}function f(e){var t,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function p(e){return f(u(d(e),8*e.length))}function g(e,t){var n,o,c=d(e),a=[],r=[];for(a[15]=r[15]=void 0,c.length>16&&(c=u(c,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^c[n],r[n]=1549556828^c[n];return o=u(a.concat(d(t)),512+8*t.length),f(u(r.concat(o),640))}function h(e){var t,n,o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return o}function m(e){return unescape(encodeURIComponent(e))}function v(e){return p(m(e))}function y(e){return h(v(e))}function S(e,t){return g(m(e),m(t))}function _(e,t){return h(S(e,t))}function b(e,t,n){return t?n?S(t,e):_(t,e):n?v(e):y(e)}cc._RF.push(t,"ac11cIpDllNqrrnA8DHEndh","md5");var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"function"==typeof define&&define.amd?define(function(){return b}):"object"===(void 0===t?"undefined":k(t))&&t.exports?t.exports=b:$.md5=b,t.exports={md5:b},cc._RF.pop()},{}],pot:[function(e,t,n){"use strict";cc._RF.push(t,"4aaabVwKFdHpYoOYe3bF19H","pot"),cc.Class({properties:{pot:cc.Node,hasObstacle:{get:function(){return this._hasObstacle},set:function(e){this._hasObstacle=e}}},ctor:function(){this._hasObstacle=!1},setPot:function(e){this.pot=e,this.originSp=this.pot.getComponent(cc.Sprite).spriteFrame,this.obstacle=cc.find("obstacle",this.pot)},setObstacle:function(e){this.pot.getComponent(cc.Sprite).spriteFrame=e,this.obstacle.active=!0,this.hasObstacle=!0},restoreObstacle:function(){this.hasObstacle&&(this.pot.getComponent(cc.Sprite).spriteFrame=this.originSp,this.obstacle.active=!1,this.hasObstacle=!1)},getPosition:function(){return this.pot.getPosition()}}),cc._RF.pop()},{}],rankLayer:[function(e,t,n){"use strict";cc._RF.push(t,"29576r6q6hDhK5FZd6Z3jwr","rankLayer");e("./rank");var o=null;cc.Class({extends:cc.Component,properties:{tongle1:{default:null,type:cc.Toggle},tongle2:{default:null,type:cc.Toggle},rankScroll:{default:null,type:cc.Node},listItem:{default:null,type:cc.Prefab},rScroll:{default:null,type:cc.Node}},onLoad:function(){(o=this)._friendsData=null,o._worldsData=null,o._friendsBests=new Array,o._worldsBests=new Array,o._myRank=0,o._scrolll2=cc.find("rankScroll2",o.node),o._content2=cc.find("rankScroll2/view/content",o.node),o.register()},register:function(){cc.find("backBtn",o.node).on("click",function(e){o._callBack&&o._callBack(),o.node.active=!1},o)},start:function(){},createItem:function(e,t){var n=cc.instantiate(o.listItem);return n.getComponent("item").init(t,e),n},init:function(e,t){o._friendsData=e.friendRank,o._worldsData=e.worldRank,o._callBack=t,cc.find("myRankBg/myRank",o.node).getComponent(cc.Label).string="我的排名："+o._myRank,o.initBestsData(),o._initScroll(o.rankScroll,o._friendsData.length,o._friendsData),o._initScroll(o._content2,o._worldsData.length,o._worldsData),o._scrolll2.active=!1},initBestsData:function(){o._friendsBests.splice(0,o._friendsBests.length),o._worldsBests.splice(0,o._worldsBests.length);for(var e=0;e<3;e++){var t=o._friendsData.shift(),n=o._worldsData.shift();void 0!==t&&o._friendsBests.push(t),void 0!==n&&o._worldsBests.push(t)}o._initBestsView(o._friendsBests)},_initBestsView:function(e){for(var t=0;t<3;t++){var n=e[t];void 0!==n&&o._initBest(t+1,n)}},_initBest:function(e,t){var n="rank_"+e,c=cc.find(n,o.node),a=cc.find("name",c);a=a.getComponent(cc.Label);var r=cc.find("grade",c);r=r.getComponent(cc.Label);var i=cc.find("location",c);i=i.getComponent(cc.Label);var s=cc.find("mask/image",c);s=s.getComponent(cc.Sprite),a.string=t.name||"",r.string=t.score||0;var l=t.portrait;l&&(l=l.split("/0",1),l+="/64",cc.loader.load({url:l,type:"png"},function(e,t){var n=new cc.SpriteFrame;n.setTexture(t),s.spriteFrame=n}))},_initScroll:function(e,t,n){for(var c=0,a=e,r=0;r<t;r++){var i=o.createItem(r,n[r]);a.addChild(i),0===c&&(c=i.getContentSize().height),i.setPosition(0,-r*c-c/2)}var s=a.getContentSize();c*t>s.height&&a.setContentSize(s.width,c*t),s=a.getContentSize()},checkTongle1:function(){o._initBestsView(o._friendsBests),o.rScroll.active=!0,o._scrolll2.active=!1},checkTongle2:function(){o._initBestsView(o._worldsBests),o.rScroll.active=!1,o._scrolll2.active=!0}}),cc._RF.pop()},{"./rank":"rank"}],rankQunLayer:[function(e,t,n){"use strict";cc._RF.push(t,"685a13RmsdA4oPpe5mW3L/z","rankQunLayer");var o=null;cc.Class({extends:cc.Component,properties:{rankScroll:{default:null,type:cc.Node},listItem:{default:null,type:cc.Prefab},rScroll:{default:null,type:cc.ScrollView}},onLoad:function(){(o=this)._listData=new Array,o._bestsData=new Array,o._myRank=0,o.register()},register:function(){cc.find("backBtn",o.node).on("click",function(e){o._callBack&&o._callBack(),o.node.active=!1},o)},start:function(){},createItem:function(e,t){var n=cc.instantiate(o.listItem);return n.getComponent("item").init(t,e),n},init:function(e,t){o._listData.splice(0,o._listData.length);for(var n=e,c=0;c<n.length;c++)o._listData[c]=n[c];o._myRank=e.myRank,o._callBack=t,cc.find("myRankBg/myRank",o.node).getComponent(cc.Label).string="我的排名："+o._myRank,o.initBestsData(),o._initScroll(o.rankScroll,o._listData.length,o._listData)},initBestsData:function(){o._bestsData.splice(0,o._listData);for(var e=0;e<3;e++){var t=o._listData.shift();void 0!==t&&o._bestsData.push(t)}o._initBestsView(o._bestsData)},_initBestsView:function(e){for(var t=0;t<3;t++){var n=e[t];void 0!==n&&o._initBest(t+1,n)}},_initBest:function(e,t){var n="rank_"+e,c=cc.find(n,o.node),a=cc.find("name",c);a=a.getComponent(cc.Label);var r=cc.find("grade",c);r=r.getComponent(cc.Label);var i=cc.find("location",c);i=i.getComponent(cc.Label);var s=cc.find("mask/image",c);s=s.getComponent(cc.Sprite),a.string=t.name||"",r.string=t.score||0;var l=t.portrait;l&&(l=l.split("/0",1),l+="/64",cc.loader.load({url:l,type:"png"},function(e,t){var n=new cc.SpriteFrame;n.setTexture(t),s.spriteFrame=n}))},_initScroll:function(e,t,n){for(var c=0,a=e,r=0;r<t;r++){var i=o.createItem(r,n[r]);a.addChild(i),0===c&&(c=i.getContentSize().height),i.setPosition(0,-r*c-c/2)}var s=a.getContentSize();c*t>s.height&&a.setContentSize(s.width,c*t),s=a.getContentSize()}}),cc._RF.pop()},{}],rank:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"e1b6forRfpLV6/5PUcMGZMQ","rank"),Object.defineProperty(n,"__esModule",{value:!0});var c=e("../config/config").urls,a=(e("../config/config"),e("../utils/util"));n.default=function e(){o(this,e),this.loadRankWidget=function(e,t){cc.loader.loadRes("wx/rankRes/rankWidget",cc.Prefab,function(n,o){console.log("rankWidget",o);var c=cc.instantiate(o);e.node.addChild(c);var a=c.getContentSize(),r=e.node.getContentSize(),i=r.width/a.width;r.height,a.height,c.setScale(i,1),c.setPosition(cc.p(0,0)),c.active=!1,e[t=t||"rankWidget"]=c})},this.loadQunRankWidget=function(e,t){cc.loader.loadRes("wx/rankRes/qunRank",cc.Prefab,function(n,o){console.log("qunRank",o);var c=cc.instantiate(o);e.node.addChild(c);var a=c.getContentSize(),r=e.node.getContentSize(),i=r.width/a.width;r.height,a.height,c.setScale(i,1),c.setPosition(cc.p(0,0)),c.active=!1,e[t=t||"qunRankWidget"]=c})},this.getFriendRank=function(e){var t=c.user+"/friendrank",n={};a.request({url:t,data:n,method:"GET",success:function(t){console.log(t),e&&"function"==typeof e&&e(t.data)}})},this.getWorldRank=function(e){var t=c.user+"/worldrank",n={};a.request({url:t,data:n,method:"GET",success:function(t){console.log(t),e&&"function"==typeof e&&e(t.data)}})},this.getRank=function(e){var t=c.user+"/rank",n={};a.request({url:t,data:n,method:"GET",success:function(t){console.log(t),e&&"function"==typeof e&&e(t.data)},fail:function(e){}})},this.getQunRank=function(e,t){var n=c.user+"/grouprank",o={groupid:e};a.request({url:n,data:o,method:"GET",success:function(e){console.log("getQunRank",e),t&&"function"==typeof t&&t(e.data)},fail:function(e){}})}},t.exports=n.default,cc._RF.pop()},{"../config/config":"config","../utils/util":"util"}],report:[function(e,t,n){"use strict";cc._RF.push(t,"ef92fCytGVCMISD5MY0T5eN","report"),t.exports={loginError:{event:"login_error",wx_error:"wx_login_error",server_error:"server_login_error"},vipError:{event:"vip_info",vip_error:"vip_error"}},cc._RF.pop()},{}],share:[function(e,t,n){"use strict";cc._RF.push(t,"dfdc48va/BI3JvpeHC4ZqVT","share");var o=e("../config/config").urls,c=(e("../config/config"),e("../utils/util"));console.log("updateShareMenu"),cc.sys.platform==cc.sys.WECHAT_GAME&&wx.updateShareMenu({withShareTicket:!0,success:function(e){console.log("updateShareMenu true res:",e)},fail:function(e){console.log("updateShareMenu fail res:",e)},complete:function(e){}}),cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("onShareAppMessage"),wx.onShareAppMessage(function(e){return console.log("onShareAppMessage",e),{imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400}),query:{key1:123456},success:function(e){e.shareTickets&&wx.getShareInfo({shareTicket:e.shareTickets[0],success:function(e){console.log(e)},fail:function(){}}),console.log(e)},fail:function(e){console.log(e)}}}));t.exports={shareAppMessage:function(e,t){wx.shareAppMessage({imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400}),query:{uid:e||"chen",qunId:t||""},success:function(e){console.log("shareAppMessage",e)},fail:function(e){console.log("shareAppMessage fail",e)}})},getShareInfo:function(){wx.getShareInfo({shareTicket:"",success:function(e){console.log(e)},fail:function(e){console.log("shareFail")}})},addFriend:function(e){var t=o.user+"/add_friend",n={appid:e,frienduid:"chen"};c.request({url:t,data:n,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("addFriend Success")}})},shareGroup:function(e){var t=o.user+"/add_group",n={groupid:e};c.request({url:t,data:n,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("add_group Success");var t=e.data;console.log(t)},fail:function(e){console.error(e)}})}},cc._RF.pop()},{"../config/config":"config","../utils/util":"util"}],start:[function(e,t,n){"use strict";cc._RF.push(t,"14e6cuEeOlPPYfH9y3rtQce","start"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.btn_start=this.node.getChildByName("btn_start"),this.btn_start.on("click",this.onStartGame,this)},start:function(){},onStartGame:function(){cc.log("game start"),cc.director.loadScene("game")}}),cc._RF.pop()},{}],tokenMgr:[function(e,t,n){"use strict";cc._RF.push(t,"63de4lNRX9EaKE7j9iu116y","tokenMgr");var o=null;t.exports={getToken:function(){return o},checkToken:function(){return!!o},setToken:function(e){o=e,console.log("setToken:"+o)}},cc._RF.pop()},{}],userOperate:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"e8432LMsC5Ab4dxBxvtaoRh","userOperate"),Object.defineProperty(n,"__esModule",{value:!0});var c=e("../config/config").urls,a=e("../config/config"),r=e("../utils/util");n.default=function e(){o(this,e),this.setScore=function(e){var t=c.user+"/set_score",n={};n.score=e,r.request({url:t,data:n,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("setScore Success")}})},this.setBlob=function(e){var t=c.user+"/set_blob",n={};n.blob=e,r.request({url:t,data:n,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST"})},this.setUserInfo=function(){var e=c.user+"/setuserinfo",t={};t.portrait=a.userInfo.avatarUrl,t.name=a.userInfo.nickName,t.geo=a.userInfo.city,r.request({url:e,data:t,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST"})},this.getUserData=function(){var e=c.user+"/get_user",t={};r.request({url:e,data:t,method:"GET",success:function(e){console.log(e)}})},this.getTuiguangUrl=function(){var e=c.user+"/get_tuiguangUrl",t={};r.request({url:e,data:t,method:"GET",success:function(e){console.log(e)}})}},t.exports=n.default,cc._RF.pop()},{"../config/config":"config","../utils/util":"util"}],util:[function(e,t,n){"use strict";cc._RF.push(t,"7b5beVJqxpORpezh/mvvNl6","util");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=e("tokenMgr"),a=e("../config/config").urls,r=e("md5"),i=e("../config/config"),s=function(e){return(e=e.toString())[1]?e:"0"+e},l=i.config.appsecret,u=(i.config.appid,function(e){var t=new Array;for(var n in e){var c=o(e[n]);if("string"==c||"number"==c){var a=n+"="+e[n];t.push(a)}}t.sort(function(e,t){return e>t}),t.push("key="+l);var i=t.join("&");return console.log("sign_source:"+i),r.md5(i)}),f=function(){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=e.length,n="",o=0;o<32;o++)n+=e.charAt(Math.floor(Math.random()*t));return n};t.exports={formatTime:function(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),c=e.getHours(),a=e.getMinutes(),r=e.getSeconds();return[t,n,o].map(s).join("/")+" "+[c,a,r].map(s).join(":")},randomStr:function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyz".split(""),n="",o=0;o<e;o++)n+=t[(1e3*Math.random()|0)%t.length];return n},randomString:f,request:function(e){var t=e.url,n=e.data||{},o=e.header||{},a=e.method||"GET",r=e.dataType||"",i=e.success||function(e){},s=(e.fail,e.complete||function(){});c.checkToken()&&(o.token=c.getToken()),console.log(t,e,o.token),wx.request({url:t,data:n,header:o,method:a,dataType:r,success:function(e){e.data.token&&c.setToken(e.data.token),i(e)},fail:function(e){console.log("fail",e)},complete:s})},sign:u,pay:function(e,t,n,o){e=e||1,t=t||function(e){},n=n||function(){},o=o||function(){},this.request({url:a.pay,method:"POST",data:{fee:e},success:function(e){var c=e.data;if(console.log("pay response:"+JSON.stringify(c)),c&&0==c.ecode){var a=c.data.args;console.log(a),wx.requestPayment({timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success:t,fail:n,complete:o})}},fail:function(){},complete:function(){}})}},cc._RF.pop()},{"../config/config":"config",md5:"md5",tokenMgr:"tokenMgr"}],wxAddLayer:[function(e,t,n){"use strict";cc._RF.push(t,"c24ecqoj5BLtKnPVBDlxLG2","wxAddLayer");var o=e("./rank/rank"),c=e("./share/share"),a=e("./hongbao/hongbao"),r=null;cc.Class({extends:cc.Component,properties:{},onLoad:function(){(r=this)._hongbao=new a,r._rank=new o,r._rank.loadRankWidget(r),r._hongbao.loadHongbaoWidget(r)},start:function(){},rankBtn:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&r._rank.getRank(function(e){e&&e.data&&(r.rankWidget.active=!0,r.rankWidget.getComponent("rankLayer").init(e.data,function(){}))})},shareBtn:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&c.shareAppMessage()},shareQunBtn:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&c.shareGroup("lalala")},hongbaoBtn:function(){}}),cc._RF.pop()},{"./hongbao/hongbao":"hongbao","./rank/rank":"rank","./share/share":"share"}]},{},["game","pot","start","config","report","hongbao","hongbaoLayer","gameWxLoad","login","item","rank","rankLayer","rankQunLayer","share","userOperate","md5","tokenMgr","util","wxAddLayer"]);